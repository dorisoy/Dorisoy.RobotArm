<Window xmlns:h="http://helix-toolkit.org/wpf"
        x:Class="Dorisoy.RobotArm.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        mc:Ignorable="d"
        d:DesignHeight="1080"
        d:DesignWidth="1920"
        Title="Dorisoy.RobotArm">


    <Window.Resources>
        <!-- 定义通用按钮模板 -->
        <ControlTemplate x:Key="RoundedButtonTemplate"
                         TargetType="Button">
            <Border x:Name="border"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="8"
                    Padding="{TemplateBinding Padding}">
                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                  RecognizesAccessKey="True" />
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver"
                         Value="True">
                    <Setter TargetName="border"
                            Property="Background"
                            Value="#FFE0E0E0" />
                </Trigger>
                <Trigger Property="IsPressed"
                         Value="True">
                    <Setter TargetName="border"
                            Property="Background"
                            Value="#FFCCCCCC" />
                </Trigger>
                <Trigger Property="IsEnabled"
                         Value="False">
                    <Setter TargetName="border"
                            Property="Background"
                            Value="#FFF0F0F0" />
                    <Setter TargetName="border"
                            Property="BorderBrush"
                            Value="#FFAAAAAA" />
                    <Setter Property="Foreground"
                            Value="#FF888888" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!-- 定义通用按钮样式（自动应用模板） -->
        <Style x:Key="RoundedButtonStyle"
               TargetType="Button">
            <Setter Property="Background"
                    Value="#FFFBFBFB" />
            <Setter Property="BorderBrush"
                    Value="Black" />
            <Setter Property="BorderThickness"
                    Value="0.5" />
            <Setter Property="Foreground"
                    Value="Black" />
            <Setter Property="Padding"
                    Value="10,4" />
            <Setter Property="HorizontalContentAlignment"
                    Value="Center" />
            <Setter Property="VerticalContentAlignment"
                    Value="Center" />
            <Setter Property="Template"
                    Value="{StaticResource RoundedButtonTemplate}" />
        </Style>

        <!-- （可选）让所有 Button 自动使用此样式 -->
        <Style TargetType="Button"
               BasedOn="{StaticResource RoundedButtonStyle}" />
    </Window.Resources>

    <Grid>
        <h:HelixViewport3D x:Name="viewPort3d"
                           ViewCubeHeight="150"
                           ViewCubeWidth="150"
                           ViewCubeVerticalPosition="Bottom"
                           CoordinateSystemLabelForeground="White"
                           CoordinateSystemVerticalPosition="Center"
                           CoordinateSystemHorizontalPosition="Right"
                           CoordinateSystemHeight="150"
                           CoordinateSystemWidth="150"
                           RenderOptions.BitmapScalingMode="HighQuality"
                           RenderOptions.EdgeMode="Unspecified"
                           BorderBrush="Black"
                           BorderThickness="5"
                           ShowCoordinateSystem="True"
                           ShowFrameRate="True"
                           Grid.Column="1"
                           ShowCameraInfo="True"
                           MouseLeftButtonUp="ViewPort3D_OnMouseLeftButtonUp"
                           MouseLeftButtonDown="ViewPort3D_OnMouseLeftButtonDown"
                           IsManipulationEnabled="True"
                           IsViewCubeEdgeClicksEnabled="True">
            <h:HelixViewport3D.Background>
                <LinearGradientBrush EndPoint="0.5,1"
                                     StartPoint="0.5,0">
                    <GradientStop Color="#FF060A13"
                                  Offset="0" />
                    <GradientStop Color="#FF282828"
                                  Offset="1" />
                </LinearGradientBrush>
            </h:HelixViewport3D.Background>
            <!-- 为场景添加灯光 -->
            <h:GridLinesVisual3D Width="16000"
                                 Length="16000"
                                 Thickness="1.8"
                                 MinorDistance="100"
                                 MajorDistance="400"
                                 Fill="#E5CFCECE" />
            <h:DefaultLights />
        </h:HelixViewport3D>

        <!--卡片1-->
        <Border Background="#FFFBFBFB"
                Width="320"
                Height="414" 
                CornerRadius="10" 
                Padding="10"
                Margin="15,15,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <!--Row="0"-->
                <Label Content="X"
                       HorizontalAlignment="Center"
                       Grid.Row="0"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       FontWeight="Bold"
                       Foreground="Black"/>
                <TextBox x:Name="TbX"
                         Text="1500"
                         HorizontalAlignment="Stretch"
                         Height="23"
                         Grid.Row="0"
                         Grid.Column="1"
                         TextWrapping="Wrap"
                         VerticalAlignment="Center"
                         HorizontalContentAlignment="Center"
                         VerticalContentAlignment="Center"
                         TextChanged="ReachingPoint_TextChanged" />
                <Label Content="Y"
                       HorizontalAlignment="Center"
                       Grid.Row="0"
                       Grid.Column="2"
                       VerticalAlignment="Center"
                       FontWeight="Bold"
                       Foreground="Black"/>
                <TextBox x:Name="TbY"
                         Text="0"
                         HorizontalAlignment="Stretch"
                         Height="24"
                         Grid.Row="0"
                         Grid.Column="3"
                         TextWrapping="Wrap"
                         VerticalAlignment="Center"
                         HorizontalContentAlignment="Center"
                         VerticalContentAlignment="Center"
                         TextChanged="ReachingPoint_TextChanged" />
                <Label Content="Z"
                       HorizontalAlignment="Center"
                       Grid.Row="0"
                       Grid.Column="4"
                       VerticalAlignment="Center"
                       FontWeight="Bold"
                       Foreground="Black" />
                <TextBox x:Name="TbZ"
                         Text="1750"
                         HorizontalAlignment="Stretch"
                         Height="24"
                         Grid.Row="0"
                         Grid.Column="5"
                         TextWrapping="Wrap"
                         VerticalAlignment="Center"
                         HorizontalContentAlignment="Center"
                         VerticalContentAlignment="Center"
                         TextChanged="ReachingPoint_TextChanged" />
                <Button x:Name="button"
                        Content="前往位置"
                        HorizontalAlignment="Center"
                        Grid.Row="0"
                        Grid.Column="6"
                        VerticalAlignment="Center"
                        Height="28"
                        FontSize="11"
                        Margin="10,0,0,0"
                        Click="StartInverseKinematics" />

                <!--Row="1"-->
                <Label Content="X"
                       HorizontalAlignment="Left"
                       Grid.Row="1"
                       Grid.Column="0"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       FontWeight="Bold"
                       Height="25" />
                <Label x:Name="Tx"
                       HorizontalAlignment="Left"
                       Grid.Row="1"
                       Grid.Column="1"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       Height="25"
                       Width="63"
                       ContentStringFormat="{}{0:0.##}" />
                <Label Content="Y"
                       HorizontalAlignment="Left"
                       Grid.Row="1"
                       Grid.Column="2"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       FontWeight="Bold"
                       Height="25" />
                <Label x:Name="Ty"
                       HorizontalAlignment="Left"
                       Grid.Row="1"
                       Grid.Column="3"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       Height="25"
                       Width="67"
                       ContentStringFormat="{}{0:0.##}" />
                <Label Content="Z"
                       HorizontalAlignment="Left"
                       Grid.Row="1"
                       Grid.Column="4"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       FontWeight="Bold"
                       Height="25" />
                <Label x:Name="Tz"
                       HorizontalAlignment="Left"
                       Grid.Row="1"
                       Grid.Column="5"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       Height="25"
                       Width="62"
                       ContentStringFormat="{}{0:0.##}" />

                <!--Row="2"-->
                <Label Content="X"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       Grid.Column="0"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       FontWeight="Bold"
                       Height="25" />
                <Label x:Name="Tx_Copy"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       Grid.Column="1"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       Height="25"
                       Width="63"
                       ContentStringFormat="{}{0:0.##}" />
                <Label Content="Y"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       Grid.Column="2"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       FontWeight="Bold"
                       Height="25" />
                <Label x:Name="Ty_Copy"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       Grid.Column="3"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       Height="25"
                       Width="67"
                       ContentStringFormat="{}{0:0.##}" />
                <Label Content="Z"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       Grid.Column="4"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       FontWeight="Bold"
                       Height="25" />
                <Label x:Name="Tz_Copy"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       Grid.Column="5"
                       VerticalAlignment="Top"
                       Foreground="Black"
                       Height="25"
                       Width="62"
                       ContentStringFormat="{}{0:0.##}" />

                <!--Row="3"-->
                <Label Content="J1"
                       HorizontalAlignment="Center"
                       Grid.Row="3"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Width="30"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="joint1"
                        HorizontalAlignment="Stretch"
                        Grid.Row="3"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        VerticalAlignment="Center"
                        Maximum="180"
                        Minimum="-180"
                        ValueChanged="joint_ValueChanged"
                        LargeChange="0.1"
                        TickFrequency="0.1"/>
                <Label x:Name="J1Value"
                       HorizontalAlignment="Center"
                       Grid.Row="3"
                       Grid.Column="6"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=joint1}"
                       ContentStringFormat="{}{0:0.##}"/>
                
                <!--Row="4"-->
                <Label Content="J2"
                       HorizontalAlignment="Center"
                       Grid.Row="4"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Width="30"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="joint2"
                        HorizontalAlignment="Stretch"
                        Grid.Row="4"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        VerticalAlignment="Center"
                        Maximum="180"
                        Minimum="-180"
                        ValueChanged="joint_ValueChanged"
                        LargeChange="0.1"
                        TickFrequency="0.1"/>
                <Label x:Name="J2Value"
                       HorizontalAlignment="Center"
                       Grid.Row="4"
                       Grid.Column="6"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=joint2}"
                       ContentStringFormat="{}{0:0.##}"/>
                
                <!--Row="5"-->
                <Label Content="J3"
                       HorizontalAlignment="Center"
                       Grid.Row="5"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Width="30"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="joint3"
                        HorizontalAlignment="Stretch"
                        Grid.Row="5"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        VerticalAlignment="Center"
                        Maximum="180"
                        Minimum="-180"
                        ValueChanged="joint_ValueChanged"
                        LargeChange="0.1"
                        TickFrequency="0.1"/>
                <Label x:Name="J3Value"
                       HorizontalAlignment="Center"
                       Grid.Row="5"
                       Grid.Column="6"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=joint3}"
                       ContentStringFormat="{}{0:0.##}" />
                
                <!--Row="6"-->
                <Label Content="J4"
                       HorizontalAlignment="Center"
                       Grid.Row="6"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Width="30"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="joint4"
                        HorizontalAlignment="Stretch"
                        Grid.Row="6"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        VerticalAlignment="Center"
                        Maximum="180"
                        Minimum="-180"
                        ValueChanged="joint_ValueChanged"
                        LargeChange="0.1"
                        TickFrequency="0.1" />
                <Label x:Name="J4Value"
                       HorizontalAlignment="Center"
                       Grid.Row="6"
                       Grid.Column="6"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=joint4}"
                       ContentStringFormat="{}{0:0.##}"/>
                
                <!--Row="7"-->
                <Label Content="J5"
                       HorizontalAlignment="Center"
                       Grid.Row="7"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Width="30"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="joint5"
                        HorizontalAlignment="Stretch"
                        Grid.Row="7"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        VerticalAlignment="Center"
                        Maximum="180"
                        Minimum="-180"
                        ValueChanged="joint_ValueChanged"
                        LargeChange="0.1"
                        TickFrequency="0.1"/>
                <Label x:Name="J5Value"
                       HorizontalAlignment="Center"
                       Grid.Row="7"
                       Grid.Column="6"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=joint5}"
                       ContentStringFormat="{}{0:0.##}"/>
                
                <!--Row="8"-->
                <Label Content="J6"
                       HorizontalAlignment="Center"
                       Grid.Row="8"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Width="30"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="joint6"
                        HorizontalAlignment="Stretch"
                        Grid.Row="8"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        VerticalAlignment="Center"
                        Maximum="180"
                        Minimum="-180"
                        ValueChanged="joint_ValueChanged"
                        TickFrequency="0.1" />
                <Label x:Name="J6Value"
                       HorizontalAlignment="Center"
                       Grid.Row="8"
                       Grid.Column="6"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=joint6}"
                       ContentStringFormat="{}{0:0.##}" />

            </Grid>
        </Border>


        <!--卡片2-->
        <Border Background="#FFFBFBFB"
                Width="320"
                Height="270"
                CornerRadius="10"
                Padding="10"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="15,445,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition Height="10"/>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <!--Row="0"-->
                <Label Content="关节"
                       HorizontalAlignment="Center"
                       Grid.Row="0"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="jointSelector"
                        HorizontalAlignment="Stretch"
                        Grid.Row="0"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        Maximum="6"
                        ValueChanged="jointSelector_ValueChanged"
                        SmallChange="1"
                        IsSnapToTickEnabled="True" />
                <Label x:Name="jointSelected"
                       HorizontalAlignment="Center"
                       Grid.Row="0"
                       Grid.Column="2"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=jointSelector}"
                       ContentStringFormat="{}{0:0.##}" />

                <!--Row="1"-->
                <StackPanel Orientation="Horizontal"
                            Grid.Row="1"
                            Grid.Column="0"
                            Grid.ColumnSpan="3"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Margin="10,0,0,0">
                    <Label Content="X"
                           Foreground="Black"
                           FontSize="14"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           Margin="0,0,5,0" />
                    <CheckBox x:Name="jointXAxis"
                              Content=""
                              VerticalAlignment="Center"
                              Checked="CheckBox_StateChanged"
                              Unchecked="CheckBox_StateChanged"
                              Margin="0,0,30,0" />
                    <Label Content="Y"
                           Foreground="Black"
                           FontSize="14"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           Margin="0,0,5,0" />
                    <CheckBox x:Name="jointYAxis"
                              Content=""
                              VerticalAlignment="Center"
                              Checked="CheckBox_StateChanged"
                              Unchecked="CheckBox_StateChanged"
                              Margin="0,0,30,0" />
                    <Label Content="Z"
                           Foreground="Black"
                           FontSize="14"
                           FontWeight="Bold"
                           VerticalAlignment="Center"
                           Margin="0,0,5,0" />
                    <CheckBox x:Name="jointZAxis"
                              Content=""
                              VerticalAlignment="Center"
                              Checked="CheckBox_StateChanged"
                              Unchecked="CheckBox_StateChanged" />
                </StackPanel>

                <!--Row="3"-->
                <Label Content="X"
                       HorizontalAlignment="Center"
                       Grid.Row="3"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="jointX"
                        HorizontalAlignment="Stretch"
                        Grid.Row="3"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        Maximum="3000"
                        Minimum="-3000"
                        ValueChanged="rotationPointChanged"
                        SmallChange="1"
                        IsSnapToTickEnabled="True" />
                <Label x:Name="jointXValue"
                       HorizontalAlignment="Center"
                       Grid.Row="3"
                       Grid.Column="2"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=jointX}"
                       ContentStringFormat="{}{0:0.##}" />

                <!--Row="4"-->
                <Label Content="Y"
                       HorizontalAlignment="Center"
                       Grid.Row="4"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="jointY"
                        HorizontalAlignment="Stretch"
                        Grid.Row="4"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        Maximum="3000"
                        Minimum="-3000"
                        ValueChanged="rotationPointChanged"
                        SmallChange="1"
                        IsSnapToTickEnabled="True" />
                <Label x:Name="jointYValue"
                       HorizontalAlignment="Center"
                       Grid.Row="4"
                       Grid.Column="2"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=jointY}"
                       ContentStringFormat="{}{0:0.##}" />

                <!--Row="5"-->
                <Label Content="Z"
                       HorizontalAlignment="Center"
                       Grid.Row="5"
                       Grid.Column="0"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="14"
                       FontWeight="Bold" />
                <Slider x:Name="jointZ"
                        HorizontalAlignment="Stretch"
                        Grid.Row="5"
                        Grid.Column="1"
                        VerticalAlignment="Center"
                        Maximum="3000"
                        Minimum="-3000"
                        ValueChanged="rotationPointChanged"
                        SmallChange="1"
                        IsSnapToTickEnabled="True" />
                <Label x:Name="jointZValue"
                       HorizontalAlignment="Center"
                       Grid.Row="5"
                       Grid.Column="2"
                       VerticalAlignment="Center"
                       Foreground="Black"
                       FontSize="12"
                       Content="{Binding Value, ElementName=jointZ}"
                       ContentStringFormat="{}{0:0.##}" />

            </Grid>
        </Border>
        
    </Grid>
</Window>
